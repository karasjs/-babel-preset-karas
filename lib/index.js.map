{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { declare } from \"@babel/helper-plugin-utils\";\nimport transformReactJSX from \"@babel/plugin-transform-react-jsx\";\nimport transformReactJSXDevelopment from \"@babel/plugin-transform-react-jsx-development\";\nimport transformReactDisplayName from \"@babel/plugin-transform-react-display-name\";\nimport transformReactJSXSource from \"@babel/plugin-transform-react-jsx-source\";\nimport transformReactJSXSelf from \"@babel/plugin-transform-react-jsx-self\";\nimport transformReactPure from \"@babel/plugin-transform-react-pure-annotations\";\nimport { types as t } from \"@babel/core\";\n\nconst isCompatTag = t.react.isCompatTag;\nt.react.isCompatTag = function(tagName) {\n  if (tagName === '$') {\n    return false;\n  }\n  if (tagName && tagName.charAt(0) === '$') {\n    return true;\n  }\n  return isCompatTag(tagName);\n};\nconst isReactComponent = t.react.isReactComponent;\nt.react.isReactComponent = function(tagName) {\n  if(tagName === '$') {\n    return true;\n  }\n  return isReactComponent(tagName);\n};\n\nexport default declare((api, opts) => {\n  api.assertVersion(7);\n\n  let { pragma, pragmaFrag } = opts;\n\n  const {\n    pure,\n    throwIfNamespace = true,\n    useSpread,\n    runtime = \"classic\",\n    importSource,\n  } = opts;\n\n  // TODO: (Babel 8) Remove setting these defaults\n  if (runtime === \"classic\") {\n    pragma = pragma || \"karas.createElement\";\n    pragmaFrag = pragmaFrag || \"karas.Fragment\";\n  }\n\n  // TODO: (Babel 8) Don't cast these options but validate it\n  const development = !!opts.development;\n  const useBuiltIns = !!opts.useBuiltIns;\n\n  if (typeof development !== \"boolean\") {\n    throw new Error(\n      \"@babel/preset-react 'development' option must be a boolean.\",\n    );\n  }\n\n  const transformReactJSXPlugin =\n    runtime === \"automatic\" && development\n      ? transformReactJSXDevelopment\n      : transformReactJSX;\n\n  return {\n    plugins: [\n      [\n        transformReactJSXPlugin,\n        {\n          importSource,\n          pragma,\n          pragmaFrag,\n          runtime,\n          throwIfNamespace,\n          useBuiltIns,\n          useSpread,\n          pure,\n        },\n      ],\n      transformReactDisplayName,\n      pure !== false && transformReactPure,\n\n      development && runtime === \"classic\" && transformReactJSXSource,\n      development && runtime === \"classic\" && transformReactJSXSelf,\n    ].filter(Boolean),\n  };\n});\n"],"names":["isCompatTag","t","react","tagName","charAt","isReactComponent","declare","api","opts","assertVersion","pragma","pragmaFrag","pure","throwIfNamespace","useSpread","runtime","importSource","development","useBuiltIns","Error","transformReactJSXPlugin","transformReactJSXDevelopment","transformReactJSX","plugins","transformReactDisplayName","transformReactPure","transformReactJSXSource","transformReactJSXSelf","filter","Boolean"],"mappings":";;;;;;;;;;;;;;;EASA,IAAMA,WAAW,GAAGC,UAAC,CAACC,KAAK,CAACF,WAAW,CAAA;AACvCC,YAAC,CAACC,KAAK,CAACF,WAAW,GAAG,UAASG,OAAO,EAAE;IACtC,IAAIA,OAAO,KAAK,GAAG,EAAE;EACnB,IAAA,OAAO,KAAK,CAAA;EACd,GAAA;IACA,IAAIA,OAAO,IAAIA,OAAO,CAACC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;EACxC,IAAA,OAAO,IAAI,CAAA;EACb,GAAA;IACA,OAAOJ,WAAW,CAACG,OAAO,CAAC,CAAA;EAC7B,CAAC,CAAA;EACD,IAAME,gBAAgB,GAAGJ,UAAC,CAACC,KAAK,CAACG,gBAAgB,CAAA;AACjDJ,YAAC,CAACC,KAAK,CAACG,gBAAgB,GAAG,UAASF,OAAO,EAAE;IAC3C,IAAGA,OAAO,KAAK,GAAG,EAAE;EAClB,IAAA,OAAO,IAAI,CAAA;EACb,GAAA;IACA,OAAOE,gBAAgB,CAACF,OAAO,CAAC,CAAA;EAClC,CAAC,CAAA;AAED,cAAeG,yBAAO,CAAC,UAACC,GAAG,EAAEC,IAAI,EAAK;EACpCD,EAAAA,GAAG,CAACE,aAAa,CAAC,CAAC,CAAC,CAAA;EAEpB,EAAA,IAAMC,MAAM,GAAiBF,IAAI,CAA3BE,MAAM;MAAEC,UAAU,GAAKH,IAAI,CAAnBG,UAAU,CAAA;EAExB,EAAA,IACEC,IAAI,GAKFJ,IAAI,CALNI,IAAI;MAAA,qBAKFJ,GAAAA,IAAI,CAJNK,gBAAgB;EAAhBA,IAAAA,gBAAgB,sCAAG,IAAI,GAAA,qBAAA;MACvBC,SAAS,GAGPN,IAAI,CAHNM,SAAS;MAAA,aAGPN,GAAAA,IAAI,CAFNO,OAAO;EAAPA,IAAAA,OAAO,8BAAG,SAAS,GAAA,aAAA;MACnBC,YAAY,GACVR,IAAI,CADNQ,YAAY,CAAA;;EAGd;IACA,IAAID,OAAO,KAAK,SAAS,EAAE;MACzBL,MAAM,GAAGA,MAAM,IAAI,qBAAqB,CAAA;MACxCC,UAAU,GAAGA,UAAU,IAAI,gBAAgB,CAAA;EAC7C,GAAA;;EAEA;EACA,EAAA,IAAMM,WAAW,GAAG,CAAC,CAACT,IAAI,CAACS,WAAW,CAAA;EACtC,EAAA,IAAMC,WAAW,GAAG,CAAC,CAACV,IAAI,CAACU,WAAW,CAAA;EAEtC,EAAA,IAAI,OAAOD,WAAW,KAAK,SAAS,EAAE;EACpC,IAAA,MAAM,IAAIE,KAAK,CACb,6DAA6D,CAC9D,CAAA;EACH,GAAA;IAEA,IAAMC,uBAAuB,GAC3BL,OAAO,KAAK,WAAW,IAAIE,WAAW,GAClCI,gDAA4B,GAC5BC,qCAAiB,CAAA;IAEvB,OAAO;EACLC,IAAAA,OAAO,EAAE,CACP,CACEH,uBAAuB,EACvB;EACEJ,MAAAA,YAAY,EAAZA,YAAY;EACZN,MAAAA,MAAM,EAANA,MAAM;EACNC,MAAAA,UAAU,EAAVA,UAAU;EACVI,MAAAA,OAAO,EAAPA,OAAO;EACPF,MAAAA,gBAAgB,EAAhBA,gBAAgB;EAChBK,MAAAA,WAAW,EAAXA,WAAW;EACXJ,MAAAA,SAAS,EAATA,SAAS;EACTF,MAAAA,IAAI,EAAJA,IAAAA;EACF,KAAC,CACF,EACDY,6CAAyB,EACzBZ,IAAI,KAAK,KAAK,IAAIa,sCAAkB,EAEpCR,WAAW,IAAIF,OAAO,KAAK,SAAS,IAAIW,2CAAuB,EAC/DT,WAAW,IAAIF,OAAO,KAAK,SAAS,IAAIY,yCAAqB,CAC9D,CAACC,MAAM,CAACC,OAAO,CAAA;KACjB,CAAA;EACH,CAAC,CAAC;;;;;;;;"}