{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import { declare } from \"@babel/helper-plugin-utils\";\nimport transformReactJSX from \"@babel/plugin-transform-react-jsx\";\nimport transformReactJSXDevelopment from \"@babel/plugin-transform-react-jsx-development\";\nimport transformReactDisplayName from \"@babel/plugin-transform-react-display-name\";\nimport transformReactJSXSource from \"@babel/plugin-transform-react-jsx-source\";\nimport transformReactJSXSelf from \"@babel/plugin-transform-react-jsx-self\";\nimport transformReactPure from \"@babel/plugin-transform-react-pure-annotations\";\nimport { types as t } from \"@babel/core\";\n\nconst isCompatTag = t.react.isCompatTag;\nt.react.isCompatTag = function(tagName) {\n  if (tagName && tagName.charAt(0) === '$') {\n    return true;\n  }\n  return isCompatTag(tagName);\n};\nconst isReactComponent = t.react.isReactComponent;\nt.react.isReactComponent = function(tagName) {\n  if(tagName === '$') {\n    return true;\n  }\n  return isReactComponent(tagName);\n};\n\nexport default declare((api, opts) => {\n  api.assertVersion(7);\n\n  let { pragma, pragmaFrag } = opts;\n\n  const {\n    pure,\n    throwIfNamespace = true,\n    useSpread,\n    runtime = \"classic\",\n    importSource,\n  } = opts;\n\n  // TODO: (Babel 8) Remove setting these defaults\n  if (runtime === \"classic\") {\n    pragma = pragma || \"karas.createElement\";\n    pragmaFrag = pragmaFrag || \"karas.Fragment\";\n  }\n\n  // TODO: (Babel 8) Don't cast these options but validate it\n  const development = !!opts.development;\n  const useBuiltIns = !!opts.useBuiltIns;\n\n  if (typeof development !== \"boolean\") {\n    throw new Error(\n      \"@babel/preset-react 'development' option must be a boolean.\",\n    );\n  }\n\n  const transformReactJSXPlugin =\n    runtime === \"automatic\" && development\n      ? transformReactJSXDevelopment\n      : transformReactJSX;\n\n  return {\n    plugins: [\n      [\n        transformReactJSXPlugin,\n        {\n          importSource,\n          pragma,\n          pragmaFrag,\n          runtime,\n          throwIfNamespace,\n          useBuiltIns,\n          useSpread,\n          pure,\n        },\n      ],\n      transformReactDisplayName,\n      pure !== false && transformReactPure,\n\n      development && runtime === \"classic\" && transformReactJSXSource,\n      development && runtime === \"classic\" && transformReactJSXSelf,\n    ].filter(Boolean),\n  };\n});\n"],"names":["isCompatTag","t","react","tagName","charAt","isReactComponent","declare","api","opts","assertVersion","pragma","pragmaFrag","pure","throwIfNamespace","useSpread","runtime","importSource","development","useBuiltIns","Error","transformReactJSXPlugin","transformReactJSXDevelopment","transformReactJSX","plugins","transformReactDisplayName","transformReactPure","transformReactJSXSource","transformReactJSXSelf","filter","Boolean"],"mappings":";;;;;;;;;;;;;;;EASA,IAAMA,WAAW,GAAGC,UAAC,CAACC,KAAF,CAAQF,WAA5B;;AACAC,YAAC,CAACC,KAAF,CAAQF,WAAR,GAAsB,UAASG,OAAT,EAAkB;EACtC,MAAIA,OAAO,IAAIA,OAAO,CAACC,MAAR,CAAe,CAAf,MAAsB,GAArC,EAA0C;EACxC,WAAO,IAAP;EACD;;EACD,SAAOJ,WAAW,CAACG,OAAD,CAAlB;EACD,CALD;;EAMA,IAAME,gBAAgB,GAAGJ,UAAC,CAACC,KAAF,CAAQG,gBAAjC;;AACAJ,YAAC,CAACC,KAAF,CAAQG,gBAAR,GAA2B,UAASF,OAAT,EAAkB;EAC3C,MAAGA,OAAO,KAAK,GAAf,EAAoB;EAClB,WAAO,IAAP;EACD;;EACD,SAAOE,gBAAgB,CAACF,OAAD,CAAvB;EACD,CALD;;AAOA,cAAeG,yBAAO,CAAC,UAACC,GAAD,EAAMC,IAAN,EAAe;EACpCD,EAAAA,GAAG,CAACE,aAAJ,CAAkB,CAAlB;EADoC,MAG9BC,MAH8B,GAGPF,IAHO,CAG9BE,MAH8B;EAAA,MAGtBC,UAHsB,GAGPH,IAHO,CAGtBG,UAHsB;EAAA,MAMlCC,IANkC,GAWhCJ,IAXgC,CAMlCI,IANkC;EAAA,8BAWhCJ,IAXgC,CAOlCK,gBAPkC;EAAA,MAOlCA,gBAPkC,sCAOf,IAPe;EAAA,MAQlCC,SARkC,GAWhCN,IAXgC,CAQlCM,SARkC;EAAA,sBAWhCN,IAXgC,CASlCO,OATkC;EAAA,MASlCA,OATkC,8BASxB,SATwB;EAAA,MAUlCC,YAVkC,GAWhCR,IAXgC,CAUlCQ,YAVkC;;EAcpC,MAAID,OAAO,KAAK,SAAhB,EAA2B;EACzBL,IAAAA,MAAM,GAAGA,MAAM,IAAI,qBAAnB;EACAC,IAAAA,UAAU,GAAGA,UAAU,IAAI,gBAA3B;EACD,GAjBmC;;;EAoBpC,MAAMM,WAAW,GAAG,CAAC,CAACT,IAAI,CAACS,WAA3B;EACA,MAAMC,WAAW,GAAG,CAAC,CAACV,IAAI,CAACU,WAA3B;;EAEA,MAAI,OAAOD,WAAP,KAAuB,SAA3B,EAAsC;EACpC,UAAM,IAAIE,KAAJ,CACJ,6DADI,CAAN;EAGD;;EAED,MAAMC,uBAAuB,GAC3BL,OAAO,KAAK,WAAZ,IAA2BE,WAA3B,GACII,gDADJ,GAEIC,qCAHN;EAKA,SAAO;EACLC,IAAAA,OAAO,EAAE,CACP,CACEH,uBADF,EAEE;EACEJ,MAAAA,YAAY,EAAZA,YADF;EAEEN,MAAAA,MAAM,EAANA,MAFF;EAGEC,MAAAA,UAAU,EAAVA,UAHF;EAIEI,MAAAA,OAAO,EAAPA,OAJF;EAKEF,MAAAA,gBAAgB,EAAhBA,gBALF;EAMEK,MAAAA,WAAW,EAAXA,WANF;EAOEJ,MAAAA,SAAS,EAATA,SAPF;EAQEF,MAAAA,IAAI,EAAJA;EARF,KAFF,CADO,EAcPY,6CAdO,EAePZ,IAAI,KAAK,KAAT,IAAkBa,sCAfX,EAiBPR,WAAW,IAAIF,OAAO,KAAK,SAA3B,IAAwCW,2CAjBjC,EAkBPT,WAAW,IAAIF,OAAO,KAAK,SAA3B,IAAwCY,yCAlBjC,EAmBPC,MAnBO,CAmBAC,OAnBA;EADJ,GAAP;EAsBD,CAxDqB,CAAtB;;;;;;;;"}